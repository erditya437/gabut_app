<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Cari Barang</title>
    <style>
        /* CSS RESET */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            color: #333;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        /* Tombol Kembali (DI LUAR KONTAINER) */
        .header {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
        }

        .back-btn {
            font-size: 2.5em;
            text-decoration: none;
            color: #4a4a4a;
            transition: color 0.2s;
        }

        .back-btn:hover {
            color: #000;
        }

        .container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            text-align: center;
            margin-top: 80px;
        }

        .container.game {
            padding-top: 60px;
        }

        h1 {
            font-size: 2.5em;
            color: #1a1a1a;
            margin-bottom: 10px;
        }

        p {
            font-size: 1.1em;
            color: #666;
            margin-bottom: 20px;
        }

        .start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .game-screen {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .info-bar {
            display: flex;
            justify-content: center; /* Pusat karena hanya ada satu item */
            align-items: center;
            padding: 10px;
            background-color: #0095ff;
            border-radius: 5px;
            font-weight: bold;
            flex-wrap: wrap;
        }

        .level-info {
            font-size: 1.2em;
            margin: 5px 0;
           color: #fff
        }

       .shopping-list-container {
    text-align: left;
    padding: 15px;
    background-color: #f8f9fa;
    border-radius: 5px;
    box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
    /* Penambahan CSS untuk scroll */
    max-height: 150px; /* Atur tinggi maksimum kontainer */
    overflow-y: auto; /* Tambahkan scroll vertikal jika konten melebihi tinggi */
}

#shopping-list {
    list-style: none;
    padding: 0; /* Hapus padding default */
    margin: 0; /* Hapus margin default */
}

#shopping-list li {
    padding: 5px 0;
    border-bottom: 1px dashed #ddd;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

        #shopping-list li:last-child {
            border-bottom: none;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            height: 400px;
            overflow-y: auto;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .product-card {
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            padding: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 5px;
            text-align: center;
            font-size: 0.9em;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            min-height: 150px;
        }

        .product-name {
            font-weight: bold;
            font-size: 1em;
            line-height: 1.2;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .product-code {
            font-size: 0.8em;
            color: #777;
            margin-top: 5px;
            margin-bottom: auto; /* Ini penting untuk memposisikan kode di atas tombol */
        }

        .buy-btn {
            width: 100%;
            padding: 8px;
            font-size: 0.9em;
            font-weight: bold;
            color: #fff;
            background-color: #15ae17;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: auto;
        }

        .buy-btn:hover:enabled {
            background-color: #0056b3;
        }

        .buy-btn:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .btn {
            padding: 10px 20px;
            font-size: 1em;
            font-weight: bold;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .btn:hover {
            background-color: #0056b3;
        }

        .btn-restart {
            margin-top: 20px;
            background-color: #dc3545;
        }

        .btn-restart:hover {
            background-color: #c82333;
        }

        /* Modal / Pop-up */
        .modal {
            display: none;
            position: fixed;
            z-index: 10;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.4);
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            max-width: 400px;
            width: 100%;
        }

        .modal-content h2 {
            margin-bottom: 10px;
        }

        .modal-content p {
            margin-bottom: 20px;
        }

        /* Media Query untuk Layar Mobile */
        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 2em;
            }

            p {
                font-size: 1em;
            }

            .info-bar {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }

            .products-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                height: 350px;
            }

            #shopping-list li {
                flex-direction: column;
                align-items: flex-start;
                line-height: 1.5;
            }

            #shopping-list li span:last-child {
                margin-top: 5px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>

    <div class="header">
        <a href="index.html" class="back-btn" aria-label="Kembali ke halaman sebelumnya">‚Üê</a>
    </div>

    <div class="container" id="main-container">
        <div class="start-screen" id="start-screen">
            <h1>Belanja!</h1>
            <p>Misi kamu sederhana: temukan semua barang yang ada di daftar belanjaan. Selesaikan 6 level untuk menang!</p>
            <button class="btn" onclick="startGame()">Mulai Permainan</button>
        </div>

        <div class="game-screen" id="game-screen">
            <div class="info-bar">
                <div class="level-info">Level: <span id="current-level">1</span></div>
            </div>

            <div class="shopping-list-container">
                <h2>Daftar Belanjaan</h2>
                <ul id="shopping-list"></ul>
            </div>

            <div class="products-grid" id="products-grid">
            </div>

            <button class="btn btn-restart" onclick="restartGame()">Restart</button>
        </div>
    </div>

    <div id="modal" class="modal">
        <div class="modal-content">
            <h2 id="modal-title"></h2>
            <p id="modal-message"></p>
            <button class="btn" id="modal-btn"></button>
        </div>
    </div>

    <script>
  const allProducts = [];
const levelData = [
    { items: 1, totalProducts: 30 },
    { items: 2, totalProducts: 40 },
    { items: 3, totalProducts: 50 },
    { items: 5, totalProducts: 60 },
    { items: 7, totalProducts: 80 },
    { items: 10, totalProducts: 120 },
];

// Daftar 120 nama produk yang berbeda
const allProductNames = [
    "Jeruk 1 Kilo", "Lampu LED", "Televisi 4K", "Sepatu Olahraga", "Meja Kayu Jati", "Kursi Ergonomis",
    "Kopi Arabika 250g", "Buku Novel Fiksi", "Handuk Mandi", "Sikat Gigi Elektrik", "Pasta Gigi Herbal",
    "Sabun Cuci Piring", "Sampo Rambut", "Ponsel Pintar", "Power Bank", "Kabel USB-C", "Charger Cepat",
    "Headphone Nirkabel", "Speaker Bluetooth", "Mouse Gaming", "Keyboard Mekanik", "Monitor Ultra Wide",
    "Printer Inkjet", "Hard Disk Eksternal", "Flash Disk 128GB", "Tas Ransel Kulit", "Dompet Kulit Asli",
    "Jam Tangan Digital", "Kacamata Hitam", "Topi Baseball", "Sarung Tangan Rajut", "Syal Wol",
    "Jaket Bomber", "Kemeja Flanel", "Celana Jeans Slim Fit", "Kaos Polos", "Pakaian Dalam Pria",
    "Bra Olahraga", "Legging Yoga", "Rok Plisket", "Blouse Wanita", "Sepatu Hak Tinggi", "Sandal Jepit",
    "Sendal Gunung", "Beras 5 Kg", "Telur Ayam 1 Lusin", "Minyak Goreng 2 Liter", "Gula Pasir 1 Kg",
    "Garam Dapur", "Merica Bubuk", "Saus Tomat", "Kecap Manis", "Mie Instan", "Tepung Terigu",
    "Roti Tawar", "Keju Mozzarella", "Yogurt Buah", "Susu UHT", "Daging Sapi Segar", "Ikan Salmon Fillet",
    "Udang Beku", "Bawang Merah", "Bawang Putih", "Cabai Rawit", "Tomat Merah", "Wortel Segar",
    "Kentang 1 Kg", "Brokoli Organik", "Cokelat Batangan", "Permen Lolipop", "Keripik Kentang",
    "Es Krim Vanila", "Soda Kaleng", "Air Mineral Botol", "Jus Jeruk Kemasan", "Teh Hijau Celup",
    "Kopi Bubuk", "Pembersih Lantai", "Pewangi Ruangan", "Tissue Kering", "Tissue Basah", "Sikat Toilet",
    "Pelindung Matahari SPF 50", "Pelembab Wajah", "Sabun Cuci Muka", "Serum Vitamin C", "Lipstik Matte",
    "Eyeliner Cair", "Maskara Anti Air", "Kuas Makeup Set", "Parfum Pria", "Parfum Wanita",
    "Hair Dryer", "Catokan Rambut", "Gunting Rambut", "Cukur Rambut Elektrik", "Sikat Rambut",
    "Bantal Empuk", "Sprei Katun", "Selimut Hangat", "Gorden Jendela", "Karpet Ruang Tamu", "Vas Bunga Kaca",
    "Bingkai Foto", "Lampu Gantung", "Lampu Meja", "Lampu Tidur", "Lampu Sorot", "Lampu Jalan",
    "Gembok Pintu", "Kunci Cadangan", "Obeng Set", "Tang Jepit", "Palu Besi", "Paku", "Baut dan Mur",
    "Kuas Cat", "Rol Cat", "Ember Plastik", "Cangkul Kebun", "Sekop Kecil", "Selang Air", "Pot Tanaman",
    "Pupuk Organik", "Bibit Bunga", "Rak Piring", "Tempat Sampah Dapur"
];

let currentLevel = 0;
let shoppingList;

const mainContainer = document.getElementById('main-container');
const startScreen = document.getElementById('start-screen');
const gameScreen = document.getElementById('game-screen');
const currentLevelSpan = document.getElementById('current-level');
const shoppingListElement = document.getElementById('shopping-list');
const productsGrid = document.getElementById('products-grid');
const modal = document.getElementById('modal');
const modalTitle = document.getElementById('modal-title');
const modalMessage = document.getElementById('modal-message');
const modalBtn = document.getElementById('modal-btn');

// Fungsi untuk menginisialisasi produk dengan nama dan kode unik
function initializeProducts() {
    allProducts.length = 0;
    const shuffledNames = allProductNames.sort(() => 0.5 - Math.random());
    for (let i = 0; i < 120; i++) {
        allProducts.push({
            name: shuffledNames[i],
            code: `B-${(i + 1).toString().padStart(3, '0')}`,
        });
    }
}

// Fungsi untuk memulai permainan
function startGame() {
    initializeProducts();
    currentLevel = 1;
    loadLevel();
    startScreen.style.display = 'none';
    gameScreen.style.display = 'flex';
    mainContainer.classList.add('game');
}

// Fungsi untuk memuat level baru
function loadLevel() {
    const level = levelData[currentLevel - 1];
    currentLevelSpan.textContent = currentLevel;

    // Pilih produk belanjaan secara acak dari semua produk
    const shuffledAllProducts = [...allProducts].sort(() => 0.5 - Math.random());
    shoppingList = shuffledAllProducts.slice(0, level.items);

    renderShoppingList();
    renderProducts(level);
}

// Fungsi untuk menampilkan daftar belanjaan
function renderShoppingList() {
    shoppingListElement.innerHTML = '';
    if (shoppingList.length === 0) {
        shoppingListElement.innerHTML = '<li>Semua barang sudah dibeli!</li>';
        return;
    }
    shoppingList.forEach(item => {
        const li = document.createElement('li');
        li.innerHTML = `<span>${item.name}</span> <span>${item.code}</span>`;
        shoppingListElement.appendChild(li);
    });
}

// Fungsi untuk menampilkan daftar semua produk
function renderProducts(level) {
    productsGrid.innerHTML = '';
    
    // Pastikan produk di daftar belanjaan ada di daftar yang ditampilkan
    const shoppingListCodes = shoppingList.map(item => item.code);
    
    // Ambil produk yang tidak ada di daftar belanjaan
    const otherProducts = allProducts.filter(product => !shoppingListCodes.includes(product.code));

    // Ambil sejumlah produk acak lain untuk melengkapi total produk
    const randomOtherProducts = [...otherProducts].sort(() => 0.5 - Math.random()).slice(0, level.totalProducts - shoppingList.length);
    
    // Gabungkan produk belanjaan dan produk acak lainnya
    const productsToDisplay = [...shoppingList, ...randomOtherProducts];
    
    // Acak kembali produk-produk yang akan ditampilkan agar posisinya tidak tertebak
    const shuffledProductsToDisplay = productsToDisplay.sort(() => 0.5 - Math.random());

    shuffledProductsToDisplay.forEach((product) => {
        const card = document.createElement('div');
        card.className = 'product-card';
        card.innerHTML = `
            <span class="product-name">${product.name}</span>
            <span class="product-code">Kode: ${product.code}</span>
            <button class="buy-btn" data-code="${product.code}">Ambil</button>
        `;
        productsGrid.appendChild(card);
    });
}

// Fungsi untuk membeli barang
function buyProduct(code) {
    const shoppingItemIndex = shoppingList.findIndex(item => item.code === code);
    if (shoppingItemIndex !== -1) {
        shoppingList.splice(shoppingItemIndex, 1);
        renderShoppingList();

        const boughtBtn = document.querySelector(`.buy-btn[data-code="${code}"]`);
        if (boughtBtn) {
            boughtBtn.disabled = true;
            boughtBtn.textContent = 'Beli';
        }

        if (shoppingList.length === 0) {
            setTimeout(checkLevelCompletion, 500);
        }
    } else {
        showModal("Barang Tidak Ada di Daftar!", "Barang ini tidak ada di daftar belanjaanmu. Coba cari yang lain!", "OK", () => hideModal());
    }
}

// Event listener untuk tombol "BELI"
productsGrid.addEventListener('click', (e) => {
    if (e.target.classList.contains('buy-btn')) {
        const code = e.target.dataset.code;
        buyProduct(code);
    }
});

// Fungsi untuk memeriksa penyelesaian level
function checkLevelCompletion() {
    if (currentLevel < levelData.length) {
        showModal("Level Selesai!", "Selamat! Kamu berhasil menyelesaikan level ini. Lanjut ke level berikutnya?", "Lanjut", () => {
            hideModal();
            currentLevel++;
            loadLevel();
        });
    } else {
        showModal("Kamu Luar Biasa!", "Selamat! Kamu telah menyelesaikan semua level. Hebat!", "Ulangi", () => {
            hideModal();
            restartGame();
        });
    }
}

// Fungsi untuk merestart permainan
function restartGame() {
    startScreen.style.display = 'flex';
    gameScreen.style.display = 'none';
    mainContainer.classList.remove('game');
    // Tambahkan inisialisasi ulang
    initializeProducts(); 
}

// Fungsi untuk menampilkan pop-up
function showModal(title, message, btnText, callback) {
    modalTitle.textContent = title;
    modalMessage.textContent = message;
    modalBtn.textContent = btnText;
    modalBtn.onclick = callback;
    modal.style.display = 'flex';
}

// Fungsi untuk menyembunyikan pop-up
function hideModal() {
    modal.style.display = 'none';
}

// Panggil saat halaman pertama kali dimuat
document.addEventListener('DOMContentLoaded', () => {
    initializeProducts();
});
    </script>
</body>
</html>